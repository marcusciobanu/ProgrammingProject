{% extends 'accounts/base.html' %}
{% load static %}
{% block title %}~ register{% endblock %}
{% block style %}{% static 'register/styles/register.css' %}{% endblock %}
{% block content %}
<div class="wrapper">
    <form method="post" action="{% url 'registerpage' %}">
        {% csrf_token %}
        {% comment %} All of the relevant fields for registration {% endcomment %}
        <h1>Registration</h1>
        <div class="inputbox">
            <div class="inputfield">
                <input type="text" name="username" placeholder="Username" {% if form.username.value %} value="{{ form.username.value }}" {% endif %} required>
                <i class='bx bxs-user'></i>
            </div>
            <div class="inputfield">
                <input type="text" name="first_name" placeholder="Forename" {% if form.first_name.value %} value="{{ form.first_name.value }}" {% endif %} required>
                <i class='bx bxs-user'></i>
            </div>
        </div>
        <div class="inputbox">
            <div class="inputfield">
                <input type="email" name="email" placeholder="Email" {% if form.email.value %} value="{{ form.email.value }}" {% endif %} required>
                <i class='bx bxs-envelope'></i>
            </div>
            <div class="inputfield">
                <input type="text" name="last_name" placeholder="Surname" {% if form.last_name.value %} value="{{ form.last_name.value }}" {% endif %} required>
                <i class='bx bxs-user'></i>
            </div>
        </div>
        <div class="inputbox">
            <div class="inputfield">
                <input type="password" name="password1" placeholder="Password" {% if form.password1.value %} value="{{ form.password1.value }}" {% endif %} required>
                <i class='bx bxs-key'></i>
            </div>
            <div class="inputfield">
                <input type="password" name="password2" placeholder="Confirm Password" {% if form.password2.value %} value="{{ form.password2.value }}" {% endif %} required>
                <i class='bx bxs-key'></i>
            </div>
        </div>
        {% comment %} Creates error box by iterating through error dictionary {% endcomment %}
        {% if form.errors %}
        <div class="error-message">
            <ul>
                {% for field, errors in form.errors.items %}
                    <li><strong>{{ field }}:</strong>
                        <ul>
                            {% for error in errors %}
                                <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                    </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        <label>Already have an account? <a href="../login">Login</a></label>
        <button type="submit" class="button">Register</button>
    </form>
</div>
{% endblock %}
